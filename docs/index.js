(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function c(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=c(e);fetch(e.href,r)}})();const v=""+new URL("service-worker.js",import.meta.url).href;window.navigator.serviceWorker.register(v).catch(console.error);const x=document.getElementById("board"),L=(()=>{const t=document.createElementNS("http://www.w3.org/2000/svg","use"),n=document.createElementNS("http://www.w3.org/2000/svg","use"),c=document.createElementNS("http://www.w3.org/2000/svg","g");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#inner-hex"),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","#outer-hex"),n.classList.add("inner-cell"),t.classList.add("outer-cell"),c.classList.add("cell"),c.append(t,n),c})();function g(t){return t%2===0}function y(t,n=0,c=t.length){return t[Math.trunc(Math.random()*c+n)]}const h={ice:new u("ice","lightblue"),sea:new u("sea","blue"),desert:new u("desert","yellow"),grassland:new u("grassland","lightgreen"),forest:new u("forest","darkgreen"),mountains:new u("mountains","slategrey")};function u(t,n){return{name:t,color:n}}const E=window.document.styleSheets[0];Object.values(h).forEach(t=>{E.insertRule(`[data-biom="${t.name}"] {
            .inner-cell {
                fill: ${t.color};
            }
        }`)});function $({cx:t,cy:n,x:c,y:s,q:e,r,s:i,biom:d}){const a=L.cloneNode(!0);a.setAttribute("transform",`translate(${t}, ${n})`),a.dataset.biom=d;const o=document.createElementNS("http://www.w3.org/2000/svg","g"),l=document.createElementNS("http://www.w3.org/2000/svg","text"),f=document.createElementNS("http://www.w3.org/2000/svg","text"),w=document.createElementNS("http://www.w3.org/2000/svg","text"),m=document.createElementNS("http://www.w3.org/2000/svg","text");return l.textContent=`${e}`,f.textContent=`${r}`,w.textContent=`${i}`,m.textContent=`${c}, ${s}`,l.setAttribute("transform",`translate(${1.5}, 2)`),f.setAttribute("transform",`translate(${4.5}, ${3.5})`),w.setAttribute("transform","translate(2, 5)"),m.setAttribute("transform",`translate(${1.5}, ${3.5})`),l.classList.add("cube-coord"),f.classList.add("cube-coord"),w.classList.add("cube-coord"),m.classList.add("offset-coord"),o.append(l,f,w,m),a.append(o),x.append(a),a}function S({height:t,width:n}){const c=[];for(let s=0;s<t;s+=1){const e=+!g(s);for(let r=0;r<n;r+=1){const i=r-(s-(s&1))/2,d=s===0||s===t-1?h.ice.name:y(Object.values(h).slice(1).map(({name:a})=>a));c.push(new _(r*6+e*3,s*4.5,r,s,i,s,-i-s,d))}}return c}function _(t,n,c,s,e,r,i,d){return{biom:d,cx:t,cy:n,x:c,y:s,q:e,r,s:i}}function N({q:t,r:n,s:c,x:s,y:e},r,i){const a=[{q:1,r:0,s:-1},{q:1,r:-1,s:0},{q:0,r:1,s:-1},{q:0,r:-1,s:1},{q:-1,r:0,s:1},{q:-1,r:1,s:0}].map(o=>r.find(([,l])=>l.q===t+o.q&&l.r===n+o.r&&l.s===c+o.s)).filter(Boolean);return s===0&&(a.push(r.find(([,o])=>e===o.y&&o.x===i.width-1)),g(e)&&a.push(...[e<i.height-1?r.find(([,o])=>e+1===o.y&&o.x===i.width-1):null,e>0?r.find(([,o])=>e-1===o.y&&o.x===i.width-1):null].filter(Boolean))),s===i.width-1&&(a.push(r.find(([,o])=>e===o.y&&o.x===0)),g(e)||a.push(...[e<i.height-1?r.find(([,o])=>e+1===o.y&&o.x===0):null,e>0?r.find(([,o])=>e-1===o.y&&o.x===0):null].filter(Boolean))),a.map(([o])=>o)}q();const b={width:7,height:8},p=S(b).reduce((t,n)=>(t.set($(n),n),t),new Map);[...p.values()].forEach(t=>{t.neighbors=N(t,[...p],b)});document.getElementById("toogle-coord-system").addEventListener("click",()=>{document.body.classList.toggle("use-offset-coords")});x.addEventListener("click",({target:t})=>{const n=t.closest(".cell");if(!n)return;const c=document.querySelector(".clicked");c&&(c.classList.remove("clicked"),document.querySelectorAll(".adjacent-to-clicked").forEach(s=>s.classList.remove("adjacent-to-clicked"))),n.classList.add("clicked"),p.get(n).neighbors.forEach(s=>s.classList.add("adjacent-to-clicked"))});function q(){x.innerHTML=""}
